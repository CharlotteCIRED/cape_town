grid = st_read("C:/Users/Charlotte Liotta/Desktop/cape_town/data_Cape_Town/data_maps/grid_reference_500.shp")
flood_plain_20yr = st_as_sf(gBuffer(flood_plain_20yr, byid = T, width = 0))
flood_plain_50yr = st_as_sf(gBuffer(flood_plain_50yr, byid = T, width = 0))
flood_plain_100yr = st_as_sf(gBuffer(flood_plain_100yr, byid = T, width = 0))
flood_plain_20yr_and_50yr = st_as_sf(flood_plain_20yr_and_50yr, byid = T, width = 0)
flood_plain_20yr_50yr_and_100yr = st_as_sf(flood_plain_20yr_50yr_and_100yr, byid = T, width = 0)
sum(st_area(flood_plain_20yr))
sum(st_area(flood_plain_50yr))
sum(st_area(flood_plain_100yr))
sum(st_area(flood_plain_20yr_and_50yr))
sum(st_area(flood_plain_20yr_50yr_and_100yr))
st_crs(flood_plain_20yr) = st_crs(grid)
st_crs(flood_plain_50yr) = st_crs(grid)
st_crs(flood_plain_100yr) = st_crs(grid)
st_crs(flood_plain_20yr_and_50yr) = st_crs(grid)
st_crs(flood_plain_20yr_50yr_and_100yr) = st_crs(grid)
flood_plain_20yr_grid <- as_tibble(st_intersection(st_buffer(grid, 0), flood_plain_20yr))
plot(flood_plain_20yr)
plot(flood_plain_20yr_grid)
View(flood_plain_20yr_grid)
flood_plain_20yr_grid$area <- st_area(flood_plain_20yr_grid$geometry)
sum(flood_plain_20yr_grid$area)
flood_plain_50yr_grid <- as_tibble(st_intersection(st_buffer(grid, 0), flood_plain_50yr))
flood_plain_50yr_grid$area <- st_area(flood_plain_50yr_grid$geometry)
sum(flood_plain_50yr_grid$area)
flood_plain_100yr_grid <- as_tibble(st_intersection(st_buffer(grid, 0), flood_plain_100yr))
flood_plain_100yr_grid$area <- st_area(flood_plain_100yr_grid$geometry)
sum(flood_plain_100yr_grid$area)
flood_plain_20yr_and_50yr_grid <- as_tibble(st_intersection(st_buffer(grid, 0), flood_plain_20yr_and_50yr))
flood_plain_20yr_and_50yr_grid$area <- st_area(flood_plain_20yr_and_50yr_grid$geometry)
sum(flood_plain_20yr_and_50yr_grid$area)
flood_plain_20yr_50yr_and_100yr_grid <- as_tibble(st_intersection(st_buffer(grid, 0), flood_plain_20yr_50yr_and_100yr))
flood_plain_20yr_50yr_and_100yr_grid$area <- st_area(flood_plain_20yr_50yr_and_100yr_grid$geometry)
sum(flood_plain_20yr_50yr_and_100yr_grid$area)
st_write(flood_plain_20yr_grid, 'C:/Users/Charlotte Liotta/Desktop/cape_town/2. Data/Cape_Town_data/flood_plain_20yr_grid.shp')
st_write(flood_plain_50yr_grid, 'C:/Users/Charlotte Liotta/Desktop/cape_town/2. Data/Cape_Town_data/flood_plain_50yr_grid.shp')
st_write(flood_plain_100yr_grid, 'C:/Users/Charlotte Liotta/Desktop/cape_town/2. Data/Cape_Town_data/flood_plain_100yr_grid.shp')
st_write(flood_plain_20yr_and_50yr_grid, 'C:/Users/Charlotte Liotta/Desktop/cape_town/2. Data/Cape_Town_data/flood_plain_20yr_and_50yr_grid.shp')
st_write(flood_plain_20yr_50yr_and_100yr_grid, 'C:/Users/Charlotte Liotta/Desktop/cape_town/2. Data/Cape_Town_data/flood_plain_20yr_50yr_and_100yr_grid.shp')
flood_plain_20yr_grid$ID
flood_plain_20yr_grid = flood_plain_20yr_grid[, c("ID", "area")]
flood_plain_50yr_grid = flood_plain_50yr_grid[, c("ID", "area")]
flood_plain_100yr_grid = flood_plain_100yr_grid[, c("ID", "area")]
flood_plain_20yr_and_50yr_grid = flood_plain_20yr_and_50yr_grid[, c("ID", "area")]
flood_plain_20yr_50yr_and_100yr_grid = flood_plain_20yr_50yr_and_100yr_grid[, c("ID", "area")]
write.xlsx(flood_plain_20yr_grid, 'C:/Users/Charlotte Liotta/Desktop/cape_town/2. Data/Cape_Town_data/flood_plain_20yr_grid.xlsx')
write.xlsx(flood_plain_50yr_grid, 'C:/Users/Charlotte Liotta/Desktop/cape_town/2. Data/Cape_Town_data/flood_plain_50yr_grid.xlsx')
write.xlsx(flood_plain_100yr_grid, 'C:/Users/Charlotte Liotta/Desktop/cape_town/2. Data/Cape_Town_data/flood_plain_100yr_grid.xlsx')
write.xlsx(flood_plain_20yr_and_50yr_grid, 'C:/Users/Charlotte Liotta/Desktop/cape_town/2. Data/Cape_Town_data/flood_plain_20yr_and_50yr_grid.xlsx')
write.xlsx(flood_plain_20yr_50yr_and_100yr_grid, 'C:/Users/Charlotte Liotta/Desktop/cape_town/2. Data/Cape_Town_data/flood_plain_20yr_50yr_and_100yr_grid.xlsx')
table(flood_plain_20yr_grid$area)
summary(flood_plain_20yr_grid$area)
summary(flood_plain_20yr_50yr_and_100yr_grid$area)
library(rgdal)
library(sf)
library(tidyverse)
library(openxlsx)
library(rgeos)
library(tiff)
library(raster)
grid = readOGR("C:/Users/Charlotte Liotta/Desktop/cape_town/data_Cape_Town/data_maps/grid_reference_500.shp")
grid <- spTransform(grid, CRS(proj4string(FU_5yr)))
install.packages("exactextractr")
library(exactextractr)
grid = readOGR("C:/Users/Charlotte Liotta/Desktop/cape_town/data_Cape_Town/data_maps/grid_reference_500.shp")
grid <- spTransform(grid, CRS(proj4string(FU_5yr)))
FU_5yr = raster('C:/Users/Charlotte Liotta/Desktop/cape_town/2. Data/FATHOM/South Africa/fluvial_undefended/FU_1in5.tif')
FU_5yr = crop(FU_5yr, grid)
FU_5yr <- reclassify(FU_5yr, cbind(-9999, NA))
library(rgdal)
library(sf)
library(tidyverse)
library(openxlsx)
library(rgeos)
library(tiff)
library(raster)
library(exactextractr)
FU_5yr = raster('C:/Users/Charlotte Liotta/Desktop/cape_town/2. Data/FATHOM/South Africa/fluvial_undefended/FU_1in5.tif')
FU_5yr = crop(FU_5yr, grid)
FU_5yr <- reclassify(FU_5yr, cbind(-9999, NA))
grid <- spTransform(grid, CRS(proj4string(FU_5yr)))
grid = readOGR("C:/Users/Charlotte Liotta/Desktop/cape_town/data_Cape_Town/data_maps/grid_reference_500.shp")
FU_5yr = raster('C:/Users/Charlotte Liotta/Desktop/cape_town/2. Data/FATHOM/South Africa/fluvial_undefended/FU_1in5.tif')
grid <- spTransform(grid, CRS(proj4string(FU_5yr)))
FU_5yr = crop(FU_5yr, grid)
FU_5yr <- reclassify(FU_5yr, cbind(-9999, NA))
FU_5yr <- reclassify(FU_5yr, cbind(999, NA))
cellStats(FU_5yr, 'min')
cellStats(FU_5yr, 'max')
cellStats(FU_5yr, 'mean')
prop_inondable_5yr = FU_5yr
prop_inondable_5yr <- reclassify(prop_inondable_5yr, cbind(NA, 0))
prop_inondable_5yr <- reclassify(prop_inondable_5yr, cbind(!NA, 1))
cellStats(prop_inondable_5yr, 'min')
cellStats(prop_inondable_5yr, 'max')
prop_inondable_5yr <- reclassify(prop_inondable_5yr, cbind(0.005, 10, 1))
cellStats(prop_inondable_5yr, 'max')
FU_5yr_grid = extract(FU_5yr, grid, fun=mean, weights = TRUE, na.rm=TRUE)
FU_5yr_grid = data.frame(matrix(unlist(FU_5yr_grid))[,1])
View(FU_5yr_grid)
FU_5yr_grid.desc()
descrive(FU_5yr_grid)
describe(FU_5yr_grid)
sum(FU_5yr_grid)
min(FU_5yr_grid)
max(FU_5yr_grid)
mean(FU_5yr_grid)
nanmean(min(FU_5yr_grid))
nanmean(FU_5yr_grid)
prop_inondable_5yr_grid = extract(prop_inondable_5yr, grid, fun=mean, weights = TRUE, na.rm=TRUE)
prop_inondable_5yr_grid = data.frame(matrix(unlist(prop_inondable_5yr_grid))[,1])
mean(prop_inondable_5yr_grid)
median(prop_inondable_5yr_grid)
max(prop_inondable_5yr_grid)
min(prop_inondable_5yr_grid)m
min(prop_inondable_5yr_grid)
FU_5yr$prop_inondable = prop_inondable_5yr_grid
prop_inondable_5yr_grid[,1]
FU_5yr$prop_inondable = prop_inondable_5yr_grid[,1]
FU_5yr_grid$prop_inondable = prop_inondable_5yr_grid[,1]
View(FU_5yr_grid)
colnames(FU_5yr_grid) = c("flood_depth", "prop_flood_prone")
write.xlsx(FU_5yr_grid, 'C:/Users/Charlotte Liotta/Desktop/cape_town/2. Data/Cape_Town_data/FU_5yr.xlsx')
write.xlsx(FU_5yr_grid, 'C:/Users/Charlotte Liotta/Desktop/cape_town/2. Data/FATHOM/FU_5yr.xlsx')
FU_100yr = raster('C:/Users/Charlotte Liotta/Desktop/cape_town/2. Data/FATHOM/South Africa/fluvial_undefended/FU_1in100.tif')
FU_100yr = crop(FU_100yr, grid)
FU_100yr <- reclassify(FU_100yr, cbind(-9999, NA))
FU_100yr <- reclassify(FU_100yr, cbind(999, NA))
cellStats(FU_100yr, 'min')
cellStats(FU_100yr, 'max')
cellStats(FU_100yr, 'mean')
prop_inondable_100yr = FU_100yr
prop_inondable_100yr <- reclassify(prop_inondable_100yr, cbind(NA, 0))
prop_inondable_100yr <- reclassify(prop_inondable_100yr, cbind(0.005, 10, 1))
FU_100yr_grid = extract(FU_100yr, grid, fun=mean, weights = TRUE, na.rm=TRUE)
FU_100yr_grid = data.frame(matrix(unlist(FU_100yr_grid))[,1])
prop_inondable_100yr_grid = extract(prop_inondable_100yr, grid, fun=mean, weights = TRUE, na.rm=TRUE)
prop_inondable_100yr_grid = data.frame(matrix(unlist(prop_inondable_100yr_grid))[,1])
FU_100yr_grid$prop_inondable = prop_inondable_100yr_grid[,1]
colnames(FU_100yr_grid) = c("flood_depth", "prop_flood_prone")
write.xlsx(FU_100yr_grid, 'C:/Users/Charlotte Liotta/Desktop/cape_town/2. Data/FATHOM/FU_100yr.xlsx')
P_100yr = raster('C:/Users/Charlotte Liotta/Desktop/cape_town/2. Data/FATHOM/South Africa/pluvial/P_1in100.tif')
P_100yr = crop(P_100yr, grid)
P_100yr <- reclassify(P_100yr, cbind(-9999, NA))
P_100yr <- reclassify(P_100yr, cbind(999, NA))
cellStats(P_100yr, 'min')
cellStats(P_100yr, 'max')
cellStats(P_100yr, 'mean')
prop_inondable_100yr = P_100yr
prop_inondable_100yr <- reclassify(prop_inondable_100yr, cbind(NA, 0))
prop_inondable_100yr <- reclassify(prop_inondable_100yr, cbind(0.005, 10, 1))
P_100yr_grid = extract(P_100yr, grid, fun=mean, weights = TRUE, na.rm=TRUE)
P_100yr_grid = data.frame(matrix(unlist(P_100yr_grid))[,1])
prop_inondable_100yr_grid = extract(prop_inondable_100yr, grid, fun=mean, weights = TRUE, na.rm=TRUE)
prop_inondable_100yr_grid = data.frame(matrix(unlist(prop_inondable_100yr_grid))[,1])
P_100yr_grid$prop_inondable = prop_inondable_100yr_grid[,1]
colnames(P_100yr_grid) = c("flood_depth", "prop_flood_prone")
write.xlsx(P_100yr_grid, 'C:/Users/Charlotte Liotta/Desktop/cape_town/2. Data/FATHOM/P_100yr.xlsx')
FU_20yr = raster('C:/Users/Charlotte Liotta/Desktop/cape_town/2. Data/FATHOM/South Africa/fluvial_undefended/FU_1in20.tif')
FU_20yr = crop(FU_20yr, grid)
FU_20yr <- reclassify(FU_20yr, cbind(-9999, NA))
FU_20yr <- reclassify(FU_20yr, cbind(999, NA))
cellStats(FU_20yr, 'min')
cellStats(FU_20yr, 'max')
cellStats(FU_20yr, 'mean')
prop_inondable_20yr = FU_20yr
prop_inondable_20yr <- reclassify(prop_inondable_20yr, cbind(NA, 0))
prop_inondable_20yr <- reclassify(prop_inondable_20yr, cbind(0.005, 10, 1))
FU_20yr_grid = extract(FU_20yr, grid, fun=mean, weights = TRUE, na.rm=TRUE)
FU_20yr_grid = data.frame(matrix(unlist(FU_20yr_grid))[,1])
prop_inondable_20yr_grid = extract(prop_inondable_20yr, grid, fun=mean, weights = TRUE, na.rm=TRUE)
prop_inondable_20yr_grid = data.frame(matrix(unlist(prop_inondable_20yr_grid))[,1])
FU_20yr_grid$prop_inondable = prop_inondable_20yr_grid[,1]
colnames(FU_20yr_grid) = c("flood_depth", "prop_flood_prone")
write.xlsx(FU_20yr_grid, 'C:/Users/Charlotte Liotta/Desktop/cape_town/2. Data/FATHOM/FU_20yr.xlsx')
FU_1000yr = raster('C:/Users/Charlotte Liotta/Desktop/cape_town/2. Data/FATHOM/South Africa/fluvial_undefended/FU_1in1000.tif')
FU_1000yr = crop(FU_1000yr, grid)
FU_1000yr <- reclassify(FU_1000yr, cbind(-9999, NA))
FU_1000yr <- reclassify(FU_1000yr, cbind(999, NA))
cellStats(FU_1000yr, 'min')
cellStats(FU_1000yr, 'max')
cellStats(FU_1000yr, 'mean')
prop_inondable_1000yr = FU_1000yr
prop_inondable_1000yr <- reclassify(prop_inondable_1000yr, cbind(NA, 0))
prop_inondable_1000yr <- reclassify(prop_inondable_1000yr, cbind(0.005, 10, 1))
FU_1000yr_grid = extract(FU_1000yr, grid, fun=mean, weights = TRUE, na.rm=TRUE)
FU_1000yr_grid = data.frame(matrix(unlist(FU_1000yr_grid))[,1])
prop_inondable_1000yr_grid = extract(prop_inondable_1000yr, grid, fun=mean, weights = TRUE, na.rm=TRUE)
prop_inondable_1000yr_grid = data.frame(matrix(unlist(prop_inondable_1000yr_grid))[,1])
FU_1000yr_grid$prop_inondable = prop_inondable_1000yr_grid[,1]
colnames(FU_1000yr_grid) = c("flood_depth", "prop_flood_prone")
write.xlsx(FU_1000yr_grid, 'C:/Users/Charlotte Liotta/Desktop/cape_town/2. Data/FATHOM/FU_1000yr.xlsx')
library(rgdal)
library(sf)
library(tidyverse)
library(openxlsx)
library(rgeos)
library(tiff)
library(raster)
library(exactextractr)
grid = readOGR("C:/Users/Charlotte Liotta/Desktop/cape_town/data_Cape_Town/data_maps/grid_reference_500.shp")
FU_5yr = raster('C:/Users/Charlotte Liotta/Desktop/cape_town/2. Data/FATHOM/South Africa/fluvial_undefended/FU_1in5.tif')
grid <- spTransform(grid, CRS(proj4string(FU_5yr)))
P_10yr = raster('C:/Users/Charlotte Liotta/Desktop/cape_town/2. Data/FATHOM/South Africa/pluvial/P_1in10.tif')
P_10yr = crop(P_10yr, grid)
P_10yr <- reclassify(P_10yr, cbind(-9999, NA))
P_10yr <- reclassify(P_10yr, cbind(999, NA))
cellStats(P_10yr, 'min')
cellStats(P_10yr, 'max')
cellStats(P_10yr, 'mean')
prop_inondable_10yr = P_10yr
prop_inondable_10yr <- reclassify(prop_inondable_10yr, cbind(NA, 0))
prop_inondable_10yr <- reclassify(prop_inondable_10yr, cbind(0.005, 10, 1))
P_10yr_grid = extract(P_10yr, grid, fun=mean, weights = TRUE, na.rm=TRUE)
P_10yr_grid = data.frame(matrix(unlist(P_10yr_grid))[,1])
prop_inondable_10yr_grid = extract(prop_inondable_10yr, grid, fun=mean, weights = TRUE, na.rm=TRUE)
prop_inondable_10yr_grid = data.frame(matrix(unlist(prop_inondable_10yr_grid))[,1])
P_10yr_grid$prop_inondable = prop_inondable_10yr_grid[,1]
colnames(P_10yr_grid) = c("flood_depth", "prop_flood_prone")
write.xlsx(P_10yr_grid, 'C:/Users/Charlotte Liotta/Desktop/cape_town/2. Data/FATHOM/P_10yr.xlsx')
P_20yr = raster('C:/Users/Charlotte Liotta/Desktop/cape_town/2. Data/FATHOM/South Africa/pluvial/P_1in20.tif')
P_20yr = crop(P_20yr, grid)
P_20yr <- reclassify(P_20yr, cbind(-9999, NA))
P_20yr <- reclassify(P_20yr, cbind(999, NA))
cellStats(P_20yr, 'min')
cellStats(P_20yr, 'max')
cellStats(P_20yr, 'mean')
prop_inondable_20yr = P_20yr
prop_inondable_20yr <- reclassify(prop_inondable_20yr, cbind(NA, 0))
prop_inondable_20yr <- reclassify(prop_inondable_20yr, cbind(0.005, 10, 1))
P_20yr_grid = extract(P_20yr, grid, fun=mean, weights = TRUE, na.rm=TRUE)
P_20yr_grid = data.frame(matrix(unlist(P_20yr_grid))[,1])
prop_inondable_20yr_grid = extract(prop_inondable_20yr, grid, fun=mean, weights = TRUE, na.rm=TRUE)
prop_inondable_20yr_grid = data.frame(matrix(unlist(prop_inondable_20yr_grid))[,1])
P_20yr_grid$prop_inondable = prop_inondable_20yr_grid[,1]
colnames(P_20yr_grid) = c("flood_depth", "prop_flood_prone")
write.xlsx(P_20yr_grid, 'C:/Users/Charlotte Liotta/Desktop/cape_town/2. Data/FATHOM/P_20yr.xlsx')
P_50yr = raster('C:/Users/Charlotte Liotta/Desktop/cape_town/2. Data/FATHOM/South Africa/pluvial/P_1in50.tif')
P_50yr = crop(P_50yr, grid)
P_50yr <- reclassify(P_50yr, cbind(-9999, NA))
P_50yr <- reclassify(P_50yr, cbind(999, NA))
cellStats(P_50yr, 'min')
cellStats(P_50yr, 'max')
cellStats(P_50yr, 'mean')
prop_inondable_50yr = P_50yr
prop_inondable_50yr <- reclassify(prop_inondable_50yr, cbind(NA, 0))
prop_inondable_50yr <- reclassify(prop_inondable_50yr, cbind(0.005, 10, 1))
P_50yr_grid = extract(P_50yr, grid, fun=mean, weights = TRUE, na.rm=TRUE)
P_50yr_grid = data.frame(matrix(unlist(P_50yr_grid))[,1])
prop_inondable_50yr_grid = extract(prop_inondable_50yr, grid, fun=mean, weights = TRUE, na.rm=TRUE)
prop_inondable_50yr_grid = data.frame(matrix(unlist(prop_inondable_50yr_grid))[,1])
P_50yr_grid$prop_inondable = prop_inondable_50yr_grid[,1]
colnames(P_50yr_grid) = c("flood_depth", "prop_flood_prone")
write.xlsx(P_50yr_grid, 'C:/Users/Charlotte Liotta/Desktop/cape_town/2. Data/FATHOM/P_50yr.xlsx')
P_75yr = raster('C:/Users/Charlotte Liotta/Desktop/cape_town/2. Data/FATHOM/South Africa/pluvial/P_1in75.tif')
P_75yr = crop(P_75yr, grid)
P_75yr <- reclassify(P_75yr, cbind(-9999, NA))
P_75yr <- reclassify(P_75yr, cbind(999, NA))
cellStats(P_75yr, 'min')
cellStats(P_75yr, 'max')
cellStats(P_75yr, 'mean')
prop_inondable_75yr = P_75yr
prop_inondable_75yr <- reclassify(prop_inondable_75yr, cbind(NA, 0))
prop_inondable_75yr <- reclassify(prop_inondable_75yr, cbind(0.005, 10, 1))
P_75yr_grid = extract(P_75yr, grid, fun=mean, weights = TRUE, na.rm=TRUE)
P_75yr_grid = data.frame(matrix(unlist(P_75yr_grid))[,1])
prop_inondable_75yr_grid = extract(prop_inondable_75yr, grid, fun=mean, weights = TRUE, na.rm=TRUE)
prop_inondable_75yr_grid = data.frame(matrix(unlist(prop_inondable_75yr_grid))[,1])
P_75yr_grid$prop_inondable = prop_inondable_100yr_grid[,1]
colnames(P_75yr_grid) = c("flood_depth", "prop_flood_prone")
write.xlsx(P_75yr_grid, 'C:/Users/Charlotte Liotta/Desktop/cape_town/2. Data/FATHOM/P_75yr.xlsx')
P_75yr_grid$prop_inondable = prop_inondable_75yr_grid[,1]
colnames(P_75yr_grid) = c("flood_depth", "prop_flood_prone")
write.xlsx(P_75yr_grid, 'C:/Users/Charlotte Liotta/Desktop/cape_town/2. Data/FATHOM/P_75yr.xlsx')
P_100yr = raster('C:/Users/Charlotte Liotta/Desktop/cape_town/2. Data/FATHOM/South Africa/pluvial/P_1in200.tif')
P_100yr = crop(P_100yr, grid)
P_100yr <- reclassify(P_100yr, cbind(-9999, NA))
P_100yr <- reclassify(P_100yr, cbind(999, NA))
cellStats(P_100yr, 'min')
cellStats(P_100yr, 'max')
cellStats(P_100yr, 'mean')
prop_inondable_100yr = P_100yr
prop_inondable_100yr <- reclassify(prop_inondable_100yr, cbind(NA, 0))
prop_inondable_100yr <- reclassify(prop_inondable_100yr, cbind(0.005, 10, 1))
P_100yr_grid = extract(P_100yr, grid, fun=mean, weights = TRUE, na.rm=TRUE)
P_100yr_grid = data.frame(matrix(unlist(P_100yr_grid))[,1])
prop_inondable_100yr_grid = extract(prop_inondable_100yr, grid, fun=mean, weights = TRUE, na.rm=TRUE)
prop_inondable_100yr_grid = data.frame(matrix(unlist(prop_inondable_100yr_grid))[,1])
P_100yr_grid$prop_inondable = prop_inondable_100yr_grid[,1]
colnames(P_100yr_grid) = c("flood_depth", "prop_flood_prone")
write.xlsx(P_100yr_grid, 'C:/Users/Charlotte Liotta/Desktop/cape_town/2. Data/FATHOM/P_200yr.xlsx')
P_100yr = raster('C:/Users/Charlotte Liotta/Desktop/cape_town/2. Data/FATHOM/South Africa/pluvial/P_1in250.tif')
P_100yr = crop(P_100yr, grid)
P_100yr <- reclassify(P_100yr, cbind(-9999, NA))
P_100yr <- reclassify(P_100yr, cbind(999, NA))
cellStats(P_100yr, 'min')
cellStats(P_100yr, 'max')
cellStats(P_100yr, 'mean')
prop_inondable_100yr = P_100yr
prop_inondable_100yr <- reclassify(prop_inondable_100yr, cbind(NA, 0))
prop_inondable_100yr <- reclassify(prop_inondable_100yr, cbind(0.005, 10, 1))
P_100yr_grid = extract(P_100yr, grid, fun=mean, weights = TRUE, na.rm=TRUE)
P_100yr_grid = data.frame(matrix(unlist(P_100yr_grid))[,1])
prop_inondable_100yr_grid = extract(prop_inondable_100yr, grid, fun=mean, weights = TRUE, na.rm=TRUE)
prop_inondable_100yr_grid = data.frame(matrix(unlist(prop_inondable_100yr_grid))[,1])
P_100yr_grid$prop_inondable = prop_inondable_100yr_grid[,1]
colnames(P_100yr_grid) = c("flood_depth", "prop_flood_prone")
write.xlsx(P_100yr_grid, 'C:/Users/Charlotte Liotta/Desktop/cape_town/2. Data/FATHOM/P_250yr.xlsx')
P_100yr = raster('C:/Users/Charlotte Liotta/Desktop/cape_town/2. Data/FATHOM/South Africa/pluvial/P_1in500.tif')
P_100yr = crop(P_100yr, grid)
P_100yr <- reclassify(P_100yr, cbind(-9999, NA))
P_100yr <- reclassify(P_100yr, cbind(999, NA))
cellStats(P_100yr, 'min')
cellStats(P_100yr, 'max')
cellStats(P_100yr, 'mean')
prop_inondable_100yr = P_100yr
prop_inondable_100yr <- reclassify(prop_inondable_100yr, cbind(NA, 0))
prop_inondable_100yr <- reclassify(prop_inondable_100yr, cbind(0.005, 10, 1))
P_100yr_grid = extract(P_100yr, grid, fun=mean, weights = TRUE, na.rm=TRUE)
P_100yr_grid = data.frame(matrix(unlist(P_100yr_grid))[,1])
prop_inondable_100yr_grid = extract(prop_inondable_100yr, grid, fun=mean, weights = TRUE, na.rm=TRUE)
prop_inondable_100yr_grid = data.frame(matrix(unlist(prop_inondable_100yr_grid))[,1])
P_100yr_grid$prop_inondable = prop_inondable_100yr_grid[,1]
colnames(P_100yr_grid) = c("flood_depth", "prop_flood_prone")
write.xlsx(P_100yr_grid, 'C:/Users/Charlotte Liotta/Desktop/cape_town/2. Data/FATHOM/P_500yr.xlsx')
P_100yr = raster('C:/Users/Charlotte Liotta/Desktop/cape_town/2. Data/FATHOM/South Africa/pluvial/P_1in1000.tif')
P_100yr = crop(P_100yr, grid)
P_100yr <- reclassify(P_100yr, cbind(-9999, NA))
P_100yr <- reclassify(P_100yr, cbind(999, NA))
cellStats(P_100yr, 'min')
cellStats(P_100yr, 'max')
cellStats(P_100yr, 'mean')
prop_inondable_100yr = P_100yr
prop_inondable_100yr <- reclassify(prop_inondable_100yr, cbind(NA, 0))
prop_inondable_100yr <- reclassify(prop_inondable_100yr, cbind(0.005, 10, 1))
P_100yr_grid = extract(P_100yr, grid, fun=mean, weights = TRUE, na.rm=TRUE)
P_100yr_grid = data.frame(matrix(unlist(P_100yr_grid))[,1])
prop_inondable_100yr_grid = extract(prop_inondable_100yr, grid, fun=mean, weights = TRUE, na.rm=TRUE)
prop_inondable_100yr_grid = data.frame(matrix(unlist(prop_inondable_100yr_grid))[,1])
P_100yr_grid$prop_inondable = prop_inondable_100yr_grid[,1]
colnames(P_100yr_grid) = c("flood_depth", "prop_flood_prone")
write.xlsx(P_100yr_grid, 'C:/Users/Charlotte Liotta/Desktop/cape_town/2. Data/FATHOM/P_1000yr.xlsx')
P_100yr = raster('C:/Users/Charlotte Liotta/Desktop/cape_town/2. Data/FATHOM/South Africa/fluvial_defended/FD_1in5.tif')
P_100yr = crop(P_100yr, grid)
P_100yr <- reclassify(P_100yr, cbind(-9999, NA))
P_100yr <- reclassify(P_100yr, cbind(999, NA))
cellStats(P_100yr, 'min')
cellStats(P_100yr, 'max')
cellStats(P_100yr, 'mean')
prop_inondable_100yr = P_100yr
prop_inondable_100yr <- reclassify(prop_inondable_100yr, cbind(NA, 0))
prop_inondable_100yr <- reclassify(prop_inondable_100yr, cbind(0.005, 10, 1))
P_100yr_grid = extract(P_100yr, grid, fun=mean, weights = TRUE, na.rm=TRUE)
P_100yr_grid = data.frame(matrix(unlist(P_100yr_grid))[,1])
prop_inondable_100yr_grid = extract(prop_inondable_100yr, grid, fun=mean, weights = TRUE, na.rm=TRUE)
prop_inondable_100yr_grid = data.frame(matrix(unlist(prop_inondable_100yr_grid))[,1])
P_100yr_grid$prop_inondable = prop_inondable_100yr_grid[,1]
colnames(P_100yr_grid) = c("flood_depth", "prop_flood_prone")
write.xlsx(P_100yr_grid, 'C:/Users/Charlotte Liotta/Desktop/cape_town/2. Data/FATHOM/FD_5yr.xlsx')
P_100yr = raster('C:/Users/Charlotte Liotta/Desktop/cape_town/2. Data/FATHOM/South Africa/fluvial_defended/FD_1in10.tif')
P_100yr = crop(P_100yr, grid)
P_100yr <- reclassify(P_100yr, cbind(-9999, NA))
P_100yr <- reclassify(P_100yr, cbind(999, NA))
cellStats(P_100yr, 'min')
cellStats(P_100yr, 'max')
cellStats(P_100yr, 'mean')
prop_inondable_100yr = P_100yr
prop_inondable_100yr <- reclassify(prop_inondable_100yr, cbind(NA, 0))
prop_inondable_100yr <- reclassify(prop_inondable_100yr, cbind(0.005, 10, 1))
P_100yr_grid = extract(P_100yr, grid, fun=mean, weights = TRUE, na.rm=TRUE)
P_100yr_grid = data.frame(matrix(unlist(P_100yr_grid))[,1])
prop_inondable_100yr_grid = extract(prop_inondable_100yr, grid, fun=mean, weights = TRUE, na.rm=TRUE)
prop_inondable_100yr_grid = data.frame(matrix(unlist(prop_inondable_100yr_grid))[,1])
P_100yr_grid$prop_inondable = prop_inondable_100yr_grid[,1]
colnames(P_100yr_grid) = c("flood_depth", "prop_flood_prone")
write.xlsx(P_100yr_grid, 'C:/Users/Charlotte Liotta/Desktop/cape_town/2. Data/FATHOM/FD_10yr.xlsx')
P_100yr = raster('C:/Users/Charlotte Liotta/Desktop/cape_town/2. Data/FATHOM/South Africa/fluvial_defended/FD_1in20.tif')
P_100yr = crop(P_100yr, grid)
P_100yr <- reclassify(P_100yr, cbind(-9999, NA))
P_100yr <- reclassify(P_100yr, cbind(999, NA))
cellStats(P_100yr, 'min')
cellStats(P_100yr, 'max')
cellStats(P_100yr, 'mean')
prop_inondable_100yr = P_100yr
prop_inondable_100yr <- reclassify(prop_inondable_100yr, cbind(NA, 0))
prop_inondable_100yr <- reclassify(prop_inondable_100yr, cbind(0.005, 10, 1))
P_100yr_grid = extract(P_100yr, grid, fun=mean, weights = TRUE, na.rm=TRUE)
P_100yr_grid = data.frame(matrix(unlist(P_100yr_grid))[,1])
prop_inondable_100yr_grid = extract(prop_inondable_100yr, grid, fun=mean, weights = TRUE, na.rm=TRUE)
prop_inondable_100yr_grid = data.frame(matrix(unlist(prop_inondable_100yr_grid))[,1])
P_100yr_grid$prop_inondable = prop_inondable_100yr_grid[,1]
colnames(P_100yr_grid) = c("flood_depth", "prop_flood_prone")
write.xlsx(P_100yr_grid, 'C:/Users/Charlotte Liotta/Desktop/cape_town/2. Data/FATHOM/FD_20yr.xlsx')
P_100yr = raster('C:/Users/Charlotte Liotta/Desktop/cape_town/2. Data/FATHOM/South Africa/fluvial_defended/FD_1in50.tif')
P_100yr = crop(P_100yr, grid)
P_100yr <- reclassify(P_100yr, cbind(-9999, NA))
P_100yr <- reclassify(P_100yr, cbind(999, NA))
cellStats(P_100yr, 'min')
cellStats(P_100yr, 'max')
cellStats(P_100yr, 'mean')
prop_inondable_100yr = P_100yr
prop_inondable_100yr <- reclassify(prop_inondable_100yr, cbind(NA, 0))
prop_inondable_100yr <- reclassify(prop_inondable_100yr, cbind(0.005, 10, 1))
P_100yr_grid = extract(P_100yr, grid, fun=mean, weights = TRUE, na.rm=TRUE)
P_100yr_grid = data.frame(matrix(unlist(P_100yr_grid))[,1])
prop_inondable_100yr_grid = extract(prop_inondable_100yr, grid, fun=mean, weights = TRUE, na.rm=TRUE)
prop_inondable_100yr_grid = data.frame(matrix(unlist(prop_inondable_100yr_grid))[,1])
P_100yr_grid$prop_inondable = prop_inondable_100yr_grid[,1]
colnames(P_100yr_grid) = c("flood_depth", "prop_flood_prone")
write.xlsx(P_100yr_grid, 'C:/Users/Charlotte Liotta/Desktop/cape_town/2. Data/FATHOM/FD_50yr.xlsx')
P_100yr = raster('C:/Users/Charlotte Liotta/Desktop/cape_town/2. Data/FATHOM/South Africa/fluvial_defended/FD_1in75.tif')
P_100yr = crop(P_100yr, grid)
P_100yr <- reclassify(P_100yr, cbind(-9999, NA))
P_100yr <- reclassify(P_100yr, cbind(999, NA))
cellStats(P_100yr, 'min')
cellStats(P_100yr, 'max')
cellStats(P_100yr, 'mean')
prop_inondable_100yr = P_100yr
prop_inondable_100yr <- reclassify(prop_inondable_100yr, cbind(NA, 0))
prop_inondable_100yr <- reclassify(prop_inondable_100yr, cbind(0.005, 10, 1))
P_100yr_grid = extract(P_100yr, grid, fun=mean, weights = TRUE, na.rm=TRUE)
P_100yr_grid = data.frame(matrix(unlist(P_100yr_grid))[,1])
prop_inondable_100yr_grid = extract(prop_inondable_100yr, grid, fun=mean, weights = TRUE, na.rm=TRUE)
prop_inondable_100yr_grid = data.frame(matrix(unlist(prop_inondable_100yr_grid))[,1])
P_100yr_grid$prop_inondable = prop_inondable_100yr_grid[,1]
colnames(P_100yr_grid) = c("flood_depth", "prop_flood_prone")
write.xlsx(P_100yr_grid, 'C:/Users/Charlotte Liotta/Desktop/cape_town/2. Data/FATHOM/FD_75yr.xlsx')
P_100yr = raster('C:/Users/Charlotte Liotta/Desktop/cape_town/2. Data/FATHOM/South Africa/fluvial_defended/FD_1in100.tif')
P_100yr = crop(P_100yr, grid)
P_100yr <- reclassify(P_100yr, cbind(-9999, NA))
P_100yr <- reclassify(P_100yr, cbind(999, NA))
cellStats(P_100yr, 'min')
cellStats(P_100yr, 'max')
cellStats(P_100yr, 'mean')
prop_inondable_100yr = P_100yr
prop_inondable_100yr <- reclassify(prop_inondable_100yr, cbind(NA, 0))
prop_inondable_100yr <- reclassify(prop_inondable_100yr, cbind(0.005, 10, 1))
P_100yr_grid = extract(P_100yr, grid, fun=mean, weights = TRUE, na.rm=TRUE)
P_100yr_grid = data.frame(matrix(unlist(P_100yr_grid))[,1])
prop_inondable_100yr_grid = extract(prop_inondable_100yr, grid, fun=mean, weights = TRUE, na.rm=TRUE)
prop_inondable_100yr_grid = data.frame(matrix(unlist(prop_inondable_100yr_grid))[,1])
P_100yr_grid$prop_inondable = prop_inondable_100yr_grid[,1]
colnames(P_100yr_grid) = c("flood_depth", "prop_flood_prone")
write.xlsx(P_100yr_grid, 'C:/Users/Charlotte Liotta/Desktop/cape_town/2. Data/FATHOM/FD_100yr.xlsx')
P_100yr = raster('C:/Users/Charlotte Liotta/Desktop/cape_town/2. Data/FATHOM/South Africa/fluvial_defended/FD_1in200.tif')
P_100yr = crop(P_100yr, grid)
P_100yr <- reclassify(P_100yr, cbind(-9999, NA))
P_100yr <- reclassify(P_100yr, cbind(999, NA))
cellStats(P_100yr, 'min')
cellStats(P_100yr, 'max')
cellStats(P_100yr, 'mean')
prop_inondable_100yr = P_100yr
prop_inondable_100yr <- reclassify(prop_inondable_100yr, cbind(NA, 0))
prop_inondable_100yr <- reclassify(prop_inondable_100yr, cbind(0.005, 10, 1))
P_100yr_grid = extract(P_100yr, grid, fun=mean, weights = TRUE, na.rm=TRUE)
P_100yr_grid = data.frame(matrix(unlist(P_100yr_grid))[,1])
prop_inondable_100yr_grid = extract(prop_inondable_100yr, grid, fun=mean, weights = TRUE, na.rm=TRUE)
prop_inondable_100yr_grid = data.frame(matrix(unlist(prop_inondable_100yr_grid))[,1])
P_100yr_grid$prop_inondable = prop_inondable_100yr_grid[,1]
colnames(P_100yr_grid) = c("flood_depth", "prop_flood_prone")
write.xlsx(P_100yr_grid, 'C:/Users/Charlotte Liotta/Desktop/cape_town/2. Data/FATHOM/FD_200yr.xlsx')
P_100yr = raster('C:/Users/Charlotte Liotta/Desktop/cape_town/2. Data/FATHOM/South Africa/fluvial_defended/FD_1in250.tif')
P_100yr = crop(P_100yr, grid)
P_100yr <- reclassify(P_100yr, cbind(-9999, NA))
P_100yr <- reclassify(P_100yr, cbind(999, NA))
cellStats(P_100yr, 'min')
cellStats(P_100yr, 'max')
cellStats(P_100yr, 'mean')
prop_inondable_100yr = P_100yr
prop_inondable_100yr <- reclassify(prop_inondable_100yr, cbind(NA, 0))
prop_inondable_100yr <- reclassify(prop_inondable_100yr, cbind(0.005, 10, 1))
P_100yr_grid = extract(P_100yr, grid, fun=mean, weights = TRUE, na.rm=TRUE)
P_100yr_grid = data.frame(matrix(unlist(P_100yr_grid))[,1])
prop_inondable_100yr_grid = extract(prop_inondable_100yr, grid, fun=mean, weights = TRUE, na.rm=TRUE)
prop_inondable_100yr_grid = data.frame(matrix(unlist(prop_inondable_100yr_grid))[,1])
P_100yr_grid$prop_inondable = prop_inondable_100yr_grid[,1]
colnames(P_100yr_grid) = c("flood_depth", "prop_flood_prone")
write.xlsx(P_100yr_grid, 'C:/Users/Charlotte Liotta/Desktop/cape_town/2. Data/FATHOM/FD_250yr.xlsx')
P_100yr = raster('C:/Users/Charlotte Liotta/Desktop/cape_town/2. Data/FATHOM/South Africa/fluvial_defended/FD_1in500.tif')
P_100yr = crop(P_100yr, grid)
P_100yr <- reclassify(P_100yr, cbind(-9999, NA))
P_100yr <- reclassify(P_100yr, cbind(999, NA))
cellStats(P_100yr, 'min')
cellStats(P_100yr, 'max')
cellStats(P_100yr, 'mean')
prop_inondable_100yr = P_100yr
prop_inondable_100yr <- reclassify(prop_inondable_100yr, cbind(NA, 0))
prop_inondable_100yr <- reclassify(prop_inondable_100yr, cbind(0.005, 10, 1))
P_100yr_grid = extract(P_100yr, grid, fun=mean, weights = TRUE, na.rm=TRUE)
P_100yr_grid = data.frame(matrix(unlist(P_100yr_grid))[,1])
prop_inondable_100yr_grid = extract(prop_inondable_100yr, grid, fun=mean, weights = TRUE, na.rm=TRUE)
prop_inondable_100yr_grid = data.frame(matrix(unlist(prop_inondable_100yr_grid))[,1])
P_100yr_grid$prop_inondable = prop_inondable_100yr_grid[,1]
colnames(P_100yr_grid) = c("flood_depth", "prop_flood_prone")
write.xlsx(P_100yr_grid, 'C:/Users/Charlotte Liotta/Desktop/cape_town/2. Data/FATHOM/FD_500yr.xlsx')
P_100yr = raster('C:/Users/Charlotte Liotta/Desktop/cape_town/2. Data/FATHOM/South Africa/fluvial_defended/FD_1in1000.tif')
P_100yr = crop(P_100yr, grid)
P_100yr <- reclassify(P_100yr, cbind(-9999, NA))
P_100yr <- reclassify(P_100yr, cbind(999, NA))
cellStats(P_100yr, 'min')
cellStats(P_100yr, 'max')
cellStats(P_100yr, 'mean')
prop_inondable_100yr = P_100yr
prop_inondable_100yr <- reclassify(prop_inondable_100yr, cbind(NA, 0))
prop_inondable_100yr <- reclassify(prop_inondable_100yr, cbind(0.005, 10, 1))
P_100yr_grid = extract(P_100yr, grid, fun=mean, weights = TRUE, na.rm=TRUE)
P_100yr_grid = data.frame(matrix(unlist(P_100yr_grid))[,1])
prop_inondable_100yr_grid = extract(prop_inondable_100yr, grid, fun=mean, weights = TRUE, na.rm=TRUE)
prop_inondable_100yr_grid = data.frame(matrix(unlist(prop_inondable_100yr_grid))[,1])
P_100yr_grid$prop_inondable = prop_inondable_100yr_grid[,1]
colnames(P_100yr_grid) = c("flood_depth", "prop_flood_prone")
write.xlsx(P_100yr_grid, 'C:/Users/Charlotte Liotta/Desktop/cape_town/2. Data/FATHOM/FD_1000yr.xlsx')
